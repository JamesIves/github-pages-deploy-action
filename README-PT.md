<p align="center">
  <a href="https://github.com/marketplace/actions/deploy-to-github-pages">
    <img alt="Logotipo da A√ß√£o de Implanta√ß√£o no GitHub Pages" width="200px" src="https://github.com/JamesIves/github-pages-deploy-action/raw/dev/.github/assets/icon.png">
  </a>
</p>

<h1 align="center">
  A√ß√£o de Implanta√ß√£o no GitHub Pages :rocket:
</h1>

<p align="center">
  <a href="https://github.com/JamesIves/github-pages-deploy-action/actions">
    <img src="https://github.com/JamesIves/github-pages-deploy-action/workflows/unit-tests/badge.svg" alt="Emblema de status de testes unit√°rios">
  </a>
  
  <a href="https://github.com/JamesIves/github-pages-deploy-action/actions">
    <img src="https://github.com/JamesIves/github-pages-deploy-action/workflows/integration-tests/badge.svg" alt="Emblema de status de testes de integra√ß√£o">
  </a>
  
  <a href="https://codecov.io/gh/JamesIves/github-pages-deploy-action/branch/dev">
    <img src="https://codecov.io/gh/JamesIves/github-pages-deploy-action/branch/dev/graph/badge.svg" alt="Emblema de status de cobertura de c√≥digo">
  </a>
  
  <a href="https://github.com/JamesIves/github-pages-deploy-action/releases">
    <img src="https://img.shields.io/github/v/release/JamesIves/github-pages-deploy-action.svg?logo=github" alt="Emblema de vers√£o de lan√ßamento">
  </a>
  
  <a href="https://github.com/marketplace/actions/deploy-to-github-pages">
    <img src="https://img.shields.io/badge/action-marketplace-blue.svg?logo=github&color=orange" alt="Emblema do marketplace do GitHub">
  </a>
</p>

<p align="center">
  Implante automaticamente o seu projeto no <a href="https://pages.github.com/">GitHub Pages</a> com <a href="https://github.com/features/actions">GitHub Actions</a>. Esta a√ß√£o pode ser configurada para enviar o seu c√≥digo pronto para produ√ß√£o para qualquer ramo que voc√™ desejar, incluindo <b>gh-pages</b> e <b>docs</b>. Ela tamb√©m pode lidar com implanta√ß√µes entre reposit√≥rios diferentes e funciona com o <a href="https://github.com/enterprise">GitHub Enterprise</a> tamb√©m.
</p>

<p align="center">
  <img src="https://github.com/JamesIves/github-pages-deploy-action/raw/dev/.github/assets/screenshot.png" alt="">
</p>

<p align="center">
  A manuten√ß√£o deste projeto √© poss√≠vel gra√ßas a todos os <a href="https://github.com/JamesIves/github-pages-deploy-action/graphs/contributors">contribuidores</a> e <a href="https://github.com/sponsors/JamesIves">patrocinadores</a>. Se voc√™ gostaria de patrocinar este projeto e ter a sua imagem ou o logotipo da sua empresa aparecendo abaixo, <a href="https://github.com/sponsors/JamesIves">clique aqui</a>. üíñ
</p>

<p align="center">
<!-- premium --><!-- premium -->
</p>

<p align="center">
<!-- patrocinadores --><a href="https://github.com/Chooksta69"><img src="https://github.com/Chooksta69.png" width="50px" alt="Chooksta69" /></a>&nbsp;&nbsp;<a href="https://github.com/robjtede"><img src="https://github.com/robjtede.png" width="50px" alt="robjtede" /></a>&nbsp;&nbsp;<a href="https://github.com/hadley"><img src="https://github.com/hadley.png" width="50px" alt="hadley" /></a>&nbsp;&nbsp;<a href="https://github.com/kevinchalet"><img src="https://github.com/kevinchalet.png" width="50px" alt="kevinchalet" /></a>&nbsp;&nbsp;<a href="https://github.com/sckott"><img src="https://github.com/sckott.png" width="50px" alt="sckott" /></a>&nbsp;&nbsp;<a href="https://github.com/electrovir"><img src="https://github.com/electrovir.png" width="50px" alt="electrovir" /></a>&nbsp;&nbsp;<!-- patrocinadores -->
</p>

## Come√ßando :airplane:

Voc√™ pode incluir esta a√ß√£o no seu fluxo de trabalho para ser acionada em qualquer evento que o [GitHub Actions suporta](https://help.github.com/en/articles/events-that-trigger-workflows). Se o ramo remoto no qual voc√™ deseja implantar ainda n√£o existir, a a√ß√£o ir√° cri√°-lo para voc√™. O seu fluxo de trabalho tamb√©m precisar√° incluir a etapa `actions/checkout` antes deste fluxo de trabalho ser executado para que a implanta√ß√£o funcione. Se voc√™ pretende fazer v√°rias implanta√ß√µes em r√°pida sucess√£o, [voc√™ pode precisar usar o par√¢metro de concorr√™ncia no seu fluxo de trabalho](https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#concurrency) para evitar sobreposi√ß√µes.

Voc√™ pode ver um exemplo disso abaixo.

``` yaml
name: Construir e Implantar
on: [push]
permissions:
  contents: write
jobs:
  build-and-deploy:
    concurrency: ci-${{ github.ref }} # Recomendado se voc√™ pretende fazer v√°rias implanta√ß√µes rapidamente.
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Instalar e Construir üîß # Este exemplo de projeto √© constru√≠do usando npm e os resultados s√£o armazenados na pasta 'build'. Substitua pelos comandos necess√°rios para construir o seu projeto ou remova completamente esta etapa se o seu site j√° estiver pr√©-constru√≠do.
        run: |
          npm ci
          npm run build

      - name: Implantar üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: build # A pasta que a a√ß√£o deve implantar.
```

Se voc√™ deseja fazer com que o fluxo de trabalho seja acionado apenas em eventos de push para ramos espec√≠ficos, voc√™ pode modificar a se√ß√£o on.

```yml
on:
  push:
    branches:
      - main
```

> **Warning**
> Se voc√™ n√£o fornecer √† a√ß√£o um token de acesso ou uma chave SSH, voc√™ deve acessar as configura√ß√µes do seu reposit√≥rio e conceder as `Permiss√µes de Leitura e Escrita` ao `GITHUB_TOKEN` fornecido, caso contr√°rio, poder√° encontrar problemas de permiss√£o. Alternativamente, voc√™ pode definir o seguinte em seu arquivo de fluxo de trabalho para conceder √† a√ß√£o as permiss√µes necess√°rias.

```yml
permissions:
  contents: write
```

## Configura√ß√£o üìÅ

A parte `with` do fluxo de trabalho **deve** ser configurada antes que a a√ß√£o funcione. Voc√™ pode adicionar essas configura√ß√µes na se√ß√£o `with` encontrada nos exemplos acima. Quaisquer `secrets` devem ser referenciados usando a sintaxe de colchetes e armazenados no menu `Configura√ß√µes/Secrets` do reposit√≥rio do GitHub. Voc√™ pode aprender mais sobre a configura√ß√£o de vari√°veis de ambiente com as a√ß√µes do GitHub [aqui](https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets#creating-encrypted-secrets).

#### Configura√ß√£o Obrigat√≥ria

As seguintes op√ß√µes devem ser configuradas para fazer uma implanta√ß√£o.

| Chave    | Informa√ß√µes do Valor                                                                                                                                                                                                                                                                                                        | Tipo   | Obrigat√≥rio |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ----------- |
| `folder` | A pasta no seu reposit√≥rio que voc√™ deseja implantar. Se o seu script de constru√ß√£o compilar em um diret√≥rio chamado `build`, voc√™ deve inseri-lo aqui. Se voc√™ deseja implantar o diret√≥rio raiz, voc√™ pode colocar um `.` aqui. Voc√™ tamb√©m pode utilizar caminhos de arquivo absolutos adicionando `~` ao caminho da sua pasta. | `with` | **Sim**     |

Por padr√£o, a a√ß√£o n√£o precisa de nenhuma configura√ß√£o de token e utiliza o token do GitHub com escopo de reposit√≥rio fornecido para fazer a implanta√ß√£o. Se voc√™ precisar de mais personaliza√ß√£o, voc√™ pode modificar o tipo de implanta√ß√£o usando as seguintes op√ß√µes.

| Chave      | Informa√ß√µes do Valor                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Tipo   | Obrigat√≥rio |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ----------- |
| `token`    | Esta op√ß√£o por padr√£o utiliza o Token do GitHub com escopo de reposit√≥rio. No entanto, se voc√™ precisar de mais permiss√µes para coisas como implanta√ß√£o em outro reposit√≥rio, voc√™ pode adicionar um Token de Acesso Pessoal (PAT) aqui. Isso deve ser armazenado no menu `secrets / with` **como um segredo**. Recomendamos o uso de uma conta de servi√ßo com as permiss√µes m√≠nimas necess√°rias e recomendamos que, ao gerar um novo PAT, voc√™ selecione as escopos de permiss√£o m√≠nimos necess√°rios. [Saiba mais sobre a cria√ß√£o e uso de segredos criptografados aqui.](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets) | `with` | **N√£o**     |
| `ssh-key`  | Voc√™ pode configurar a a√ß√£o para implantar usando SSH definindo esta op√ß√£o como uma chave SSH privada armazenada **como um segredo**. Tamb√©m pode ser definido como `true` para usar uma configura√ß√£o de cliente SSH existente. Para obter informa√ß√µes mais detalhadas sobre como adicionar seu par de chaves ssh p√∫blico/privado, consulte a [se√ß√£o Usando uma Chave de Implanta√ß√£o deste README](https://github.com/JamesIves/github-pages-deploy-action/tree/dev#using-an-ssh-deploy-key-).                                                                                                                                                                      | `with` | **N√£o**     |

#### Escolhas Opcionais

| Chave                | Informa√ß√µes do Valor                                                                                                                                                                                                                                                                                                                                                           | Tipo   | Obrigat√≥rio |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | -------- |
| `branch`             | Este √© o ramo para o qual voc√™ deseja implantar, por exemplo, `gh-pages` ou `docs`. O padr√£o √© `gh-pages`.                                                                                                                                                                                                                                                                        | `with` | **N√£o**   |
| `git-config-name`    | Permite que voc√™ personalize o nome que est√° vinculado √† configura√ß√£o do git, que √© usada ao fazer push das confirma√ß√µes de implanta√ß√£o. Se isso n√£o estiver inclu√≠do, ele usar√° o nome no contexto do GitHub, seguido pelo nome da a√ß√£o.                                                                                                                                              | `with` | **N√£o**   |
| `git-config-email`   | Permite que voc√™ personalize o e-mail que est√° vinculado √† configura√ß√£o do git, que √© usada ao fazer push das confirma√ß√µes de implanta√ß√£o. Se isso n√£o estiver inclu√≠do, ele usar√° o e-mail no contexto do GitHub, seguido por um e-mail gen√©rico do GitHub noreply. Voc√™ pode incluir `<>` para o valor se desejar omitir completamente este campo e fazer push das confirma√ß√µes sem um e-mail.                | `with` | **N√£o**   |
| `repository-name`    | Permite que voc√™ especifique um caminho de reposit√≥rio diferente, desde que tenha permiss√µes para fazer push nele. Isso deve ser formatado da seguinte forma: `JamesIves/github-pages-deploy-action`. Voc√™ precisar√° usar um PAT na entrada `token` para que esta op√ß√£o de configura√ß√£o funcione corretamente.                                                                                                    | `with` | **N√£o**   |
| `target-folder`      | Se voc√™ deseja enviar o conte√∫do da pasta de implanta√ß√£o para um diret√≥rio espec√≠fico no ramo de implanta√ß√£o, voc√™ pode especific√°-lo aqui.                                                                                                                                                                                                                                     | `with` | **N√£o**   |
| `commit-message`     | Se voc√™ precisar personalizar a mensagem de confirma√ß√£o para uma integra√ß√£o, pode faz√™-lo.                                                                                                                                                                                                                                                                                               | `with` | **N√£o**   |
| `clean`              | Voc√™ pode usar esta op√ß√£o para excluir arquivos do destino de implanta√ß√£o que n√£o existem mais na origem da implanta√ß√£o. Um caso de uso √© se o seu projeto gera arquivos hash que variam de compila√ß√£o para compila√ß√£o. Usar `clean` n√£o afetar√° os diret√≥rios `.git`, `.github` ou `.ssh`. Esta op√ß√£o est√° ativada por padr√£o e pode ser desativada definindo-a como `false`. | `with` | **N√£o**   |
| `clean-exclude`      | Se voc√™ precisar usar `clean`, mas desejar preservar determinados arquivos ou pastas, pode usar esta op√ß√£o. Isso deve conter cada padr√£o em uma √∫nica linha em uma string multilinha.                                                                                                                                                                                            | `with` | **No**   |
| `dry-run`            | N√£o realize o push de fato, mas use `--dry-run` nas invoca√ß√µes de `git push` em vez disso.                                                                                                                                                                                                                                                                                           | `with` | **N√£o**   |
| `single-commit`      | Esta op√ß√£o pode ser ativada para `true` se voc√™ preferir ter uma √∫nica confirma√ß√£o no ramo de implanta√ß√£o em vez de manter todo o hist√≥rico. **Usar esta op√ß√£o tamb√©m far√° com que todo o hist√≥rico existente seja apagado do ramo de implanta√ß√£o**.                                                                                                                           | `with` | **N√£o**   |
| `force`              | For√ßa a substitui√ß√£o de implanta√ß√µes novas ao ramo de destino; caso contr√°rio, tenta fazer rebase das novas implanta√ß√µes em qualquer existente. Esta op√ß√£o est√° ativada por padr√£o e pode ser desativada definindo-a como `false`, o que pode ser √∫til se houver v√°rias implanta√ß√µes em um √∫nico ramo.                                                                           | `with` | **N√£o**   |
| `silent`             | Silencia a sa√≠da da a√ß√£o, evitando que exiba mensagens do git.                                                                                                                                                                                                                                                                                                      | `with` | **N√£o**   |
| `tag`                | Adicione uma tag √† confirma√ß√£o. Funciona apenas quando `dry-run` n√£o √© usado.                                                                                                                                                                                                                                                                                                             | `with` | **No**   |

Com a a√ß√£o configurada corretamente, voc√™ dever√° ver o fluxo de trabalho acionar a implanta√ß√£o nas condi√ß√µes configuradas.

#### Status da Implanta√ß√£o

A a√ß√£o exportar√° uma vari√°vel de ambiente chamada `deployment_status` que voc√™ pode usar em seu fluxo de trabalho para determinar se a implanta√ß√£o foi bem-sucedida ou n√£o. Voc√™ pode encontrar uma explica√ß√£o de cada tipo de status abaixo.

| Status    | Descri√ß√£o                                                                                     |
| --------- | ----------------------------------------------------------------------------------------------- |
| `success` | O status `success` indica que a a√ß√£o conseguiu implantar com sucesso no ramo.   |
| `failed`  | O status `failed` indica que a a√ß√£o encontrou um erro ao tentar implantar.      |
| `skipped` | O status `skipped` indica que a a√ß√£o saiu prematuramente, pois n√£o havia nada novo para implantar. |

Este valor tamb√©m √© definido como uma sa√≠da da etapa como `deployment-status`.

### Usando uma Chave de Implanta√ß√£o SSH üîë

Se voc√™ preferir usar uma chave de implanta√ß√£o SSH em vez de um token, primeiro voc√™ deve gerar uma nova chave SSH executando o seguinte comando no terminal, substituindo o email pelo que est√° conectado √† sua conta do GitHub.

``` bash
ssh-keygen -t rsa -m pem -b 4096 -C "seuemailaqui@example.com" -N ""
```

Depois de gerar o par de chaves, voc√™ deve adicionar o conte√∫do da chave p√∫blica no menu de [chaves de implanta√ß√£o](https://developer.github.com/v3/guides/managing-deploy-keys/) do seu reposit√≥rio. Voc√™ pode encontrar esta op√ß√£o em `Configura√ß√µes > Chaves de Implanta√ß√£o`. Voc√™ pode nomear a chave p√∫blica como quiser, mas **precisa** conceder permiss√µes de grava√ß√£o a ela. Em seguida, adicione o conte√∫do da chave privada ao menu `Configura√ß√µes > Secrets` como `DEPLOY_KEY`.

Com isso configurado, voc√™ pode definir a parte `ssh-key` da a√ß√£o como sua chave privada armazenada como um segredo.

```yml
- name: Implanta√ß√£o üöÄ
  uses: JamesIves/github-pages-deploy-action@v4
  with:
    folder: site
    ssh-key: ${{ secrets.DEPLOY_KEY }}
```

<details><summary>Voc√™ pode ver um exemplo completo disso aqui.</summary>
<p>

```yml
name: Construir e Implanta√ß√£o
on:
  push:
    branches:
      - main
jobs:
  deploy:
    concurrency: ci-${{ github.ref }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Instalar e Construir üîß # Este projeto de exemplo √© constru√≠do usando npm e produz o resultado na pasta 'build'. Substitua pelos comandos necess√°rios para construir seu projeto, ou remova esta etapa completamente se seu site estiver pr√©-constru√≠do.
        run: |
          npm ci
          npm run build

      - name: Implanta√ß√£o üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: build
          clean: true
          clean-exclude: |
            special-file.txt
            some/*.txt
          ssh-key: ${{ secrets.DEPLOY_KEY }}
```

</p>
</details>

Alternativamente, se voc√™ j√° configurou o cliente SSH em uma etapa anterior, voc√™ pode definir a op√ß√£o `ssh-key` como `true` para permitir que ele fa√ßa a implanta√ß√£o usando um cliente SSH existente. Em vez de ajustar a configura√ß√£o do cliente, ele simplesmente mudar√° para usar os pontos de extremidade SSH do GitHub.

---

### Suporte a Sistemas Operacionais üíø

Esta a√ß√£o √© principalmente desenvolvida usando o [Ubuntu](https://ubuntu.com/). [Na configura√ß√£o de trabalho do seu fluxo de trabalho](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idruns-on), √© recomend√°vel definir a propriedade `runs-on` como `ubuntu-latest`.

```yml
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
```

Se voc√™ estiver usando um sistema operacional como o [Windows](https://www.microsoft.com/en-us/windows/), voc√™ pode contornar isso usando [artifacts](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/persisting-workflow-data-using-artifacts). Na configura√ß√£o do seu fluxo de trabalho, voc√™ pode utilizar as a√ß√µes `actions/upload-artifact` e `actions/download-artifact` para mover seu projeto constru√≠do em um trabalho do Windows para um trabalho secund√°rio que lidar√° com a implanta√ß√£o.

<details><summary>Voc√™ pode ver um exemplo desse padr√£o aqui.</summary>
<p>

```yml
name: Construir e Implanta√ß√£o
on: [push]
permissions:
  contents: write
jobs:
  build:
    runs-on: windows-latest # O primeiro trabalho utiliza o windows-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Instalar e Construir üîß # Este projeto de exemplo √© constru√≠do usando npm e produz o resultado na pasta 'build'. Substitua pelos comandos necess√°rios para construir seu projeto, ou remova esta etapa completamente se seu site estiver pr√©-constru√≠do.
        run: |
          npm ci
          npm run build

      - name: Carregar Artefatos üî∫ # Em seguida, o projeto √© carregado como um artefato com o nome 'site'.
        uses: actions/upload-artifact@v1
        with:
          name: site
          path: build

  deploy:
    concurrency: ci-${{ github.ref }}
    needs: [build] # O segundo

 trabalho deve depender do primeiro para ser conclu√≠do antes de ser executado e usa ubuntu-latest em vez de windows.
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Baixar Artefatos üîª # O projeto constru√≠do √© baixado para a pasta 'site'.
        uses: actions/download-artifact@v1
        with:
          name: site

      - name: Implanta√ß√£o üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: 'site' # A pasta de implanta√ß√£o deve corresponder ao nome do artefato. Mesmo que nosso projeto seja constru√≠do na pasta 'build', o nome do artefato 'site' deve ser colocado aqui.
```

</p>
</details>

---

### Usando um Cont√™iner üö¢

Se voc√™ usar um [cont√™iner](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions#jobsjob_idcontainer) em seu fluxo de trabalho, talvez precise executar uma etapa adicional para instalar o `rsync`, pois esta a√ß√£o depende dele. Voc√™ pode ver um exemplo disso abaixo.

```yml
- name: Instalar o rsync üìö
  run: |
    apt-get update && apt-get install -y rsync

- name: Implanta√ß√£o üöÄ
  uses: JamesIves/github-pages-deploy-action@v4
```

---

### Arquivos de Constru√ß√£o Adicionais üìÅ

Se voc√™ estiver usando um dom√≠nio personalizado e precisar de um arquivo `CNAME`, ou se precisar usar um arquivo `.nojekyll`, voc√™ pode compromet√™-los com seguran√ßa diretamente no ramo de implanta√ß√£o sem que eles sejam substitu√≠dos ap√≥s cada implanta√ß√£o. Al√©m disso, voc√™ pode incluir esses arquivos na sua pasta de implanta√ß√£o para atualiz√°-los. Se voc√™ precisar adicionar arquivos adicionais √† implanta√ß√£o que devem ser ignorados pelas etapas de limpeza da constru√ß√£o, voc√™ pode utilizar a op√ß√£o `clean-exclude`.

<details><summary>Clique aqui para ver um exemplo disso.</summary>
<p>

```yml
name: Construir e Implanta√ß√£o
permissions:
  contents: write
on:
  push:
    branches:
      - main
jobs:
  deploy:
    concurrency: ci-${{ github.ref }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Instalar e Construir üîß # Este projeto de exemplo √© constru√≠do usando npm e produz o resultado na pasta 'build'. Substitua pelos comandos necess√°rios para construir seu projeto, ou remova esta etapa completamente se seu site estiver pr√©-constru√≠do.
        run: |
          npm ci
          npm run build

      - name: Implanta√ß√£o üöÄ
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: build
          clean: true
          clean-exclude: |
            special-file.txt
            some/*.txt
```

</p>
</details>

Se voc√™ deseja remover esses arquivos, deve acessar diretamente o ramo de implanta√ß√£o para remov√™-los. Isso √© para evitar que altera√ß√µes acidentais no seu script de implanta√ß√£o criem problemas.
